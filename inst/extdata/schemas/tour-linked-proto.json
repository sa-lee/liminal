    {
      "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
      "datasets": {
        "path": [],
        "embed": []
      },
      "data": {"name": "path"},
      "transform": [
        {
          "lookup": "row_number",
          "from": {
            "data": {"name": "embed"},
            "key": "row_number",
            "fields": [null, null, null]
          }
        },
        {"flatten": ["neighbors"]}
      ],
      "hconcat": [
        {
          "selection": {
            "left_brush": {"type": "interval", "zoom": false},
            "colclick": {
              "type": "multi",
              "fields": [null],
              "bind": {"legend": "dblclick"}
            }
          },
          "mark": {"type": "circle", "clip": true},
          "encoding": {
            "x": {
              "field": null,
              "type": "quantitative",
              "axis": {
                "title": "",
                "grid": false,
                "ticks": false,
                "labels": false,
                "domainColor": "lightgray"
              }
            },
            "y": {
              "field": null,
              "type": "quantitative",
              "axis": {
                "title": "",
                "grid": false,
                "ticks": false,
                "labels": false,
                "domainColor": "lightgray"
              }
            },
            "color": {
              "condition": {
                "selection": {"or": ["right_brush", "left_brush"]},
                "field": null,
                "type": null,
                "scale": {
                  "domain": [null, null]
                }
              },
              "value": "grey"
            },
            "opacity": {
              "condition": {
                "selection": {"or": ["left_brush", "colclick"]},
                "value": 0.7
              },
              "value": 0.01
            }
          }
        },
            {
              "selection": {
                "right_brush": {
                  "type": "interval",
                  "on": "[mousedown[event.shiftKey], mouseup] > mousemove",
                  "translate": "[mousedown[event.shiftKey], mouseup] > mousemove",
                  "zoom": false
                },
                "grid": {"type": "interval", "bind": "scales", "translate": false}
              },
              "mark": {"type": "circle", "clip": true},
              "encoding": {
                "x": {
                  "field": "neighbors.x",
                  "type": "quantitative",
                  "axis": {
                    "title": "",
                    "grid": false,
                    "ticks": false,
                    "labels": false,
                    "domainColor": "lightgray"
                  },
                  "scale": {"domain":[null,null]}
                },
                "y": {
                  "field": "neighbors.y",
                  "type": "quantitative",
                  "axis": {
                    "title": "",
                    "grid": false,
                    "ticks": false,
                    "labels": false,
                    "domainColor": "lightgray"
                  },
                  "scale": {"domain":[null,null]}
                },
                "color": {
                  "condition": {
                    "selection": {"or": ["right_brush", "left_brush"]},
                    "field": null,
                    "type": null,
                    "scale": {
                      "domain": null
                    }
                  },
                  "value": "grey"
                },
                "opacity": {
                  "condition": {
                    "selection": {"or": ["left_brush", "colclick"]},
                    "value": 0.7
                  },
                  "value": 0.01
                }
              }
            }
          ]
    }
